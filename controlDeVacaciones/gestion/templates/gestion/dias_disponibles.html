{% extends "gestion/base.html" %} 

{% comment %} {% block title %}Reporte Global de Vacaciones{% endblock %} {% endcomment %}

{% block content %}
    <style>
        header {
                    /* Degradado de cielo y mar */
                    background: linear-gradient(90deg, #00b8d4, #4dd0e1);
                    color: white;
                    text-align: center;
                    padding: 30px 10px;
                    box-shadow: 0 4px 12px rgba(0,0,0,0.15);
                }

                header h1 {
                    margin: 0;
                    font-size: 30px;
                    letter-spacing: 1px;
                    font-weight: 800;
                }

                header p {
                    font-size: 16px;
                    opacity: 0.95;
                    margin-top: 5px;
                }        
        /* Estilos personalizados para la card, si es necesario */
        .balance-card {
            background: #fff;
            border-radius: 1rem;
            box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.1), 0 4px 6px -2px rgba(0, 0, 0, 0.05);
            max-width: 600px;
        }
        .balance-box {
            background-color: #f0fff4; /* Verde muy suave */
            border: 2px solid #38a169; /* Borde verde */
        }
        /* Clase para el mensaje de días tomados */
        .dias-consumidos-valor {
             /* Se ajusta para que sea compatible con la estructura de la plantilla */
             /* Usaremos estilos de Tailwind directamente en la plantilla para el color */
        }
    </style>
</head>

<body class="bg-gray-50 p-4 md:p-8">

    <div class="flex flex-col items-center min-h-screen mt-8">

        <div class="balance-card p-6 md:p-10 w-full mx-auto">
            <h1 class="text-3xl font-extrabold text-gray-800 mb-6 text-center">
                Saldo de Vacaciones
            </h1>
{% comment %} #======================================================= {% endcomment %}
<!-- Selector de empleado -->
<div class="mb-6 text-center">
    <form method="get" id="formEmpleado" class="inline-block">

        <label for="empleadoSelect" class="text-gray-700 font-medium mr-2">
            Seleccionar empleado:
        </label>

        <select id="empleadoSelect"
                class="border border-gray-300 rounded-lg px-3 py-2 shadow-sm bg-white"
                onchange="window.location.href='/gestion/dias_disponibles/?empleado_id=' + this.value;"
            <option value="">-- Elegir --</option>

            {% for emp in empleados %}
                <option value="{{ emp.id }}"
                    {% if emp.id == empleado.id %}selected{% endif %}>
                    {{ emp.apellido }}, {{ emp.nombre }}
                </option>
            {% endfor %}
        </select>
    </form>
</div>
{% comment %} ======================================================================== {% endcomment %}
            
            <h2 class="text-lg font-medium text-gray-600 mb-2 text-center">
                {{ empleado.nombre }} {{ empleado.apellido }} (DNI: {{ empleado.dni }})
            </h2>

            <!-- DETALLE DE SALDO DISPONIBLE -->
            <div class="balance-box rounded-xl p-6 mb-8 text-center">
                <p class="text-md font-semibold text-gray-700 mb-2">
                    Total de Días Disponibles para el ciclo {{ anio_ciclo }}:
                </p>
                <div class="flex flex-col sm:flex-row items-center justify-center space-y-2 sm:space-y-0 sm:space-x-4">
                    <span class="text-6xl font-black text-green-700 leading-none">
                        {{ saldo.total_disponible|floatformat:0 }}
                    </span>
                    <span class="text-2xl font-bold text-green-700">
                        días
                    </span>
                </div>
            </div>
            
            <!-- Detalles del Saldo -->
            <div class="bg-gray-100 p-4 rounded-lg">
                <h3 class="text-xl font-semibold text-gray-700 mb-3 border-b pb-1">Detalle del Saldo</h3>
                
                <div class="flex justify-between py-1 border-b border-gray-200">
                    <span class="text-gray-600">Días iniciales (LCT):</span>
                    <span class="font-bold text-gray-800">{{ saldo.dias_iniciales|floatformat:0 }}</span>
                </div>
                
                <div class="flex justify-between py-1 border-b border-gray-200">
                    <span class="text-gray-600">Días adicionales (Convenio/Política):</span>
                    <span class="font-bold text-gray-800">{{ saldo.dias_adicionales|floatformat:0 }}</span>
                </div>

                <div class="flex justify-between py-1 border-b border-gray-200">
                    <span class="text-gray-600">Días tomados (consumidos):</span>
                    <!-- Nota: Asume que tienes un método o propiedad para dias_consumidos en SaldoVacaciones -->
                    <span class="font-bold text-red-500">
                        {{ saldo.dias_consumidos_total|floatformat:0 }}
                    </span>
                </div>


                <div style="display: flex; justify-content: space-between; align-items: center; padding: 0.5rem 0.75rem; background-color: #e6ffe6; border-radius: 0.5rem; margin-top: 1rem;">
                    <!-- Columna Izquierda: Título -->
                    <span style="font-weight: bold; color: #155724; font-size: 1.1rem;">
                        SALDO TOTAL:
                    </span>
                    
                    <!-- Columna Derecha: Valor (Justificado a la derecha y más grande) -->
                    <span style="font-weight: bold; color: #155724; font-size: 1.5rem;">
                        {{ saldo.total_disponible|floatformat:0 }}
                    </span>
                </div>                
                {% comment %} <div class="flex justify-between py-2 mt-2 font-extrabold text-lg text-green-700 bg-green-100 p-2 rounded">
                        <strong>
                            <span>TOTAL SALDO: {{ saldo.total_disponible|floatformat:1 }}</span>
                        </strong>    
                    </span>    
                </div> {% endcomment %}
            </div>

            <!-- Botón de Volver/Dashboard -->
            <div class="text-center mt-8">
                <a href="{% url 'gestion:dashboard' %}" 
                   class="inline-flex items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md shadow-sm text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 transition ease-in-out duration-150">
                    Volver al Dashboard
                </a>
            </div>

        </div>

    </div>

{% endblock %}